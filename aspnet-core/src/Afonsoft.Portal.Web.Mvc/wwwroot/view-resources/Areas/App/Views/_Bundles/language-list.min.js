jQuery,app.modals.CreateOrEditLanguageModal=function(){var a,e=abp.services.app.language,n=null;this.init=function(e){(a=e).getModal().find("#LanguageNameEdit").selectpicker({iconBase:"fa",tickIcon:"fa fa-check"}),a.getModal().find("#LanguageIconEdit").selectpicker({iconBase:"famfamfam-flag",tickIcon:"fa fa-check"}),n=a.getModal().find("form[name=LanguageInformationsForm]")},this.save=function(){var i=n.serializeFormToObject();a.setBusy(!0),e.createOrUpdateLanguage({language:i}).done(function(){abp.notify.info(app.localize("SavedSuccessfully")),a.close(),abp.event.trigger("app.createOrEditLanguageModalSaved")}).always(function(){a.setBusy(!1)})}};
$(function(){var a=$("#LanguagesTable"),e=abp.services.app.language,t={create:abp.auth.hasPermission("Pages.Administration.Languages.Create"),edit:abp.auth.hasPermission("Pages.Administration.Languages.Edit"),changeTexts:abp.auth.hasPermission("Pages.Administration.Languages.ChangeTexts"),delete:abp.auth.hasPermission("Pages.Administration.Languages.Delete")},n=new app.ModalManager({viewUrl:abp.appPath+"App/Languages/CreateOrEditModal",scriptUrl:abp.appPath+"view-resources/Areas/App/Views/Languages/_CreateOrEditModal.js",modalClass:"CreateOrEditLanguageModal"}),s=a.DataTable({paging:!1,serverSide:!1,processing:!1,listAction:{ajaxFunction:e.getLanguages},columnDefs:[{className:"control responsive",orderable:!1,render:function(){return""},targets:0},{targets:1,data:null,orderable:!1,autoWidth:!1,defaultContent:"",rowAction:{text:'<i class="fa fa-cog"></i> '+app.localize("Actions")+' <span class="caret"></span>',items:[{text:app.localize("Edit"),visible:function(a){return t.edit&&a.record.tenantId===abp.session.tenantId},action:function(a){n.open({id:a.record.id})}},{text:app.localize("ChangeTexts"),visible:function(){return t.changeTexts},action:function(a){document.location.href=abp.appPath+"App/Languages/Texts?languageName="+a.record.name}},{text:app.localize("SetAsDefaultLanguage"),visible:function(){return t.edit},action:function(a){var t;t=a.record,e.setDefaultLanguage({name:t.name}).done(function(){i(),abp.notify.success(app.localize("SuccessfullySaved"))})}},{text:app.localize("Delete"),visible:function(a){return t.delete&&a.record.tenantId===abp.session.tenantId},action:function(a){var t;t=a.record,abp.message.confirm(app.localize("LanguageDeleteWarningMessage",t.displayName),app.localize("AreYouSure"),function(a){a&&e.deleteLanguage({id:t.id}).done(function(){i(),abp.notify.success(app.localize("SuccessfullyDeleted"))})})}}]}},{targets:2,data:"displayName",render:function(a,e,t,n){var s=$("<span/>").append($("<i/>").addClass(t.icon).css("margin-right","5px")).append($("<span/>").attr("data-language-name",t.name).text(t.displayName));return n.settings.rawServerResponse.defaultLanguageName===t.name&&s.addClass("text-bold").append(" ("+app.localize("Default")+")"),s[0].outerHTML}},{targets:3,data:"name"},{targets:4,data:"tenantId",visible:!!abp.session.tenantId,render:function(a,e,t,n){var s=$("<span/>").addClass("label");return n.settings.rawServerResponse.defaultLanguageName===t.name?s.addClass("kt-badge kt-badge--success kt-badge--inline").text(app.localize("Yes")):s.addClass("kt-badge kt-badge--dark kt-badge--inline").text(app.localize("No")),s[0].outerHTML}},{targets:5,data:"isDisabled",render:function(a){var e=!a,t=$("<span/>").addClass("label");return e?t.addClass("kt-badge kt-badge--success kt-badge--inline").text(app.localize("Yes")):t.addClass("kt-badge kt-badge--dark kt-badge--inline").text(app.localize("No")),t[0].outerHTML}},{targets:6,data:"creationTime",render:function(a){return moment(a).format("L")}}]});function i(){s.ajax.reload()}$("#CreateNewLanguageButton").click(function(){n.open()}),abp.event.on("app.createOrEditLanguageModalSaved",function(){i()})});