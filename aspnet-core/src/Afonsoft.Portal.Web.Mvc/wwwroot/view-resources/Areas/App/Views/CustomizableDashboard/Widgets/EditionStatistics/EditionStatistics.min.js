$(function(){var t=abp.services.app.hostDashboard,a=$(".EditionStatisticsContainer"),e=a.find(".caption-helper"),n=a.find(".edition-statistics-chart"),s=app.widgetBase.create(),i={startDate:moment().add(-7,"days").startOf("day"),endDate:moment().endOf("day")},d=function(t){if(t&&0!==t.length){for(var a=["#81A17E","#BA9B7C","#569BC6","#e08283","#888888"],s=[],d=0;d<t.length;d++){var r={label:t[d].label,data:t[d].value};a[d]&&(r.color=a[d]),s.push(r)}$.plot(n,s,{series:{pie:{show:!0,innerRadius:.3,radius:1,label:{show:!0,radius:1,formatter:function(t,a){return"<div class='pie-chart-label'>"+t+" : "+Math.round(a.percent)+"%</div>"},background:{opacity:.8}}}},legend:{show:!1},grid:{hoverable:!0,clickable:!0}}),e.text(i.startDate.format("L")+" - "+i.endDate.format("L"))}else n.html($("<div/>").addClass("note").addClass("note-info").addClass("text-center").append($("<small/>").addClass("text-muted").text("- "+app.localize("NoData")+" -")))},r=function(){abp.ui.setBusy(a),t.getEditionTenantStatistics({startDate:i.startDate,endDate:i.endDate}).done(function(t){d(t.editionStatistics)}).always(function(){abp.ui.clearBusy(a)})};abp.event.on("app.dashboardFilters.DateRangePicker.OnDateChange",function(t){!t||i.startDate===t.startDate&&i.endDate===t.endDate||(i.startDate=t.startDate,i.endDate=t.endDate,s.runDelayed(r))}),s.runDelayed(r)});