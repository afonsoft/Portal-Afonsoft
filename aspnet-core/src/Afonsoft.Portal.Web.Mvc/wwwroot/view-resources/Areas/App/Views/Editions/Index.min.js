$(function(){var e=$("#EditionsTable"),a=abp.services.app.edition,i={create:abp.auth.hasPermission("Pages.Editions.Create"),edit:abp.auth.hasPermission("Pages.Editions.Edit"),delete:abp.auth.hasPermission("Pages.Editions.Delete"),moveTenantsToAnotherEdition:abp.auth.hasPermission("Pages.Editions.MoveTenantsToAnotherEdition")},t=new app.ModalManager({viewUrl:abp.appPath+"App/Editions/CreateModal",scriptUrl:abp.appPath+"view-resources/Areas/App/Views/Editions/_CreateModal.js",modalClass:"CreateOrEditEditionModal"}),n=new app.ModalManager({viewUrl:abp.appPath+"App/Editions/EditModal",scriptUrl:abp.appPath+"view-resources/Areas/App/Views/Editions/_EditModal.js",modalClass:"CreateOrEditEditionModal"}),o=new app.ModalManager({viewUrl:abp.appPath+"App/Editions/MoveTenantsToAnotherEdition",scriptUrl:abp.appPath+"view-resources/Areas/App/Views/Editions/_MoveTenantsToAnotherEditionModal.js",modalClass:"MoveTenantsToAnotherEditionModal"});$("#CreateNewEditionButton").click(function(){t.open()}),abp.event.on("app.createOrEditEditionModalSaved",function(){s()});var r=e.DataTable({paging:!1,listAction:{ajaxFunction:a.getEditions},columnDefs:[{className:"control responsive",orderable:!1,render:function(){return""},targets:0},{targets:1,data:null,orderable:!1,autoWidth:!1,defaultContent:"",rowAction:{text:'<i class="fa fa-cog"></i> '+app.localize("Actions")+' <span class="caret"></span>',items:[{text:app.localize("Edit"),visible:function(){return i.edit},action:function(e){n.open({id:e.record.id})}},{text:app.localize("Delete"),visible:function(){return i.delete},action:function(e){var i;i=e.record,abp.message.confirm(app.localize("EditionDeleteWarningMessage",i.displayName),app.localize("AreYouSure"),function(e){e&&a.deleteEdition({id:i.id}).done(function(){s(),abp.notify.success(app.localize("SuccessfullyDeleted"))})})}},{text:app.localize("MoveTenantsToAnotherEdition"),visible:function(){return i.moveTenantsToAnotherEdition},action:function(e){o.open({id:e.record.id})}}]}},{targets:2,data:"displayName"},{targets:3,data:"price",render:function(e,a,i,t){if(i.dailyPrice||i.weeklyPrice||i.monthlyPrice||i.annualPrice){var n=app.session.application.currencySign;return n+i.dailyPrice+" "+app.localize("Daily")+" / "+n+i.weeklyPrice+" "+app.localize("Weekly")+" / "+n+i.monthlyPrice+" "+app.localize("Monthly")+" / "+n+i.annualPrice+" "+app.localize("Annual")}return app.localize("Free")}},{targets:4,data:"trialDayCount",render:function(e){return e>0?app.localize("Yes")+", "+e+" "+app.localize("Days"):app.localize("No")}},{targets:5,data:"waitingDayAfterExpire"},{targets:6,data:"expiringEditionDisplayName"}]});function s(){r.ajax.reload()}});