app.modals.AddRoleModal=function(){var e,t,a,l,n={serviceMethod:null,title:app.localize("SelectAnItem"),loadOnStartup:!0,showFilter:!0,filterText:"",pageSize:app.consts.grid.defaultPageSize};function i(){l.ajax.reload()}this.init=function(o){e=o,n=$.extend(n,e.getOptions().addRoleOptions),t=e.getModal().find("#addRoleModalTable"),(a=e.getModal().find(".add-role-filter-text")).val(n.filterText),l=t.DataTable({paging:!0,serverSide:!0,processing:!0,deferLoading:0,listAction:{ajaxFunction:n.serviceMethod,inputFilter:function(){return{filter:a.val(),organizationUnitId:e.getArgs().organizationUnitId}}},columnDefs:[{targets:0,data:null,defaultContent:"",render:function(e){return'<label for="checkbox_'+e.value+'" class="kt-checkbox"><input type="checkbox" id="checkbox_'+e.value+'" />&nbsp;<span></span></label>'}},{targets:1,data:"name"},{targets:2,visible:!1,data:"value"}],select:{style:"multi",info:!1,selector:"td:first-child label.kt-checkbox span"}}),e.getModal().find(".add-role-filter-button").click(function(e){e.preventDefault(),i()}),e.getModal().find(".modal-body").keydown(function(e){13===e.which&&(e.preventDefault(),i())}),n.loadOnStartup&&i(),e.getModal().find("#btnAddRolesToOrganization").click(function(){e.setResult(l.rows({selected:!0}).data().toArray()),e.close()})}};