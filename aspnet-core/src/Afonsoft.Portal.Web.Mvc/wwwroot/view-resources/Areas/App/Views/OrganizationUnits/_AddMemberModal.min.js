app.modals.AddMemberModal=function(){var e,t,a,n,i={serviceMethod:null,title:app.localize("SelectAnItem"),loadOnStartup:!0,showFilter:!0,filterText:"",pageSize:app.consts.grid.defaultPageSize};function l(){n.ajax.reload()}this.init=function(o){e=o,i=$.extend(i,e.getOptions().addMemberOptions),t=e.getModal().find("#addMemberModalTable"),(a=e.getModal().find(".add-member-filter-text")).val(i.filterText),n=t.DataTable({paging:!0,serverSide:!0,processing:!0,deferLoading:0,listAction:{ajaxFunction:i.serviceMethod,inputFilter:function(){return{filter:a.val(),organizationUnitId:e.getArgs().organizationUnitId}}},columnDefs:[{targets:0,data:null,defaultContent:"",render:function(e){return'<label for="checkbox_'+e.value+'" class="kt-checkbox"><input type="checkbox" id="checkbox_'+e.value+'" />&nbsp;<span></span></label>'}},{targets:1,data:"name"},{targets:2,visible:!1,data:"value"}],select:{style:"multi",info:!1,selector:"td:first-child label.kt-checkbox span"}}),e.getModal().find(".add-member-filter-button").click(function(e){e.preventDefault(),l()}),e.getModal().find(".modal-body").keydown(function(e){13===e.which&&(e.preventDefault(),l())}),i.loadOnStartup&&l(),e.getModal().find("#btnAddUsersToOrganization").click(function(){e.setResult(n.rows({selected:!0}).data().toArray()),e.close()})}};