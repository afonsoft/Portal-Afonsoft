!function(e){app.modals.CreateOrEditUserModal=function(){var t,a,i=abp.services.app.user,o=null,s=new app.PasswordComplexityHelper;function n(){var a=[];return t.getModal().find(".user-role-checkbox-list input[type=checkbox]").each(function(){e(this).is(":checked")&&!e(this).is(":disabled")&&a.push(e(this).attr("name"))}),a}this.init=function(i){t=i,(a=new OrganizationTree).init(t.getModal().find(".organization-tree"),{cascadeSelectEnabled:!1}),(o=t.getModal().find("form[name=UserInformationsForm]")).validate();var r=t.getModal().find("input[name=Password],input[name=PasswordRepeat]"),d=r.closest(".form-group");s.setPasswordComplexityRules(r,window.passwordComplexitySetting),e("#EditUser_SetRandomPassword").change(function(){e(this).is(":checked")?(d.slideUp("fast"),t.getArgs().id||r.removeAttr("required")):(d.slideDown("fast"),t.getArgs().id||r.attr("required","required"))}),t.getModal().find(".user-role-checkbox-list input[type=checkbox]").change(function(){e("#assigned-role-count").text(n().length)}),t.getModal().find("[data-toggle=tooltip]").tooltip()},this.save=function(){if(o.valid()){var e=n(),s=o.serializeFormToObject();s.SetRandomPassword&&(s.Password=null),t.setBusy(!0),i.createOrUpdateUser({user:s,assignedRoleNames:e,sendActivationEmail:s.SendActivationEmail,SetRandomPassword:s.SetRandomPassword,organizationUnits:a.getSelectedOrganizations()}).done(function(){abp.notify.info(app.localize("SavedSuccessfully")),t.close(),abp.event.trigger("app.createOrEditUserModalSaved")}).always(function(){t.setBusy(!1)})}}}}(jQuery);