app.modals.LookupModal=function(){var e,t,a,o,l={serviceMethod:null,title:app.localize("SelectAnItem"),loadOnStartup:!0,showFilter:!0,filterText:"",pageSize:app.consts.grid.defaultPageSize,canSelect:function(e){return!0}};function n(){t.ajax.reload()}this.init=function(i){e=i,l=$.extend(l,e.getOptions().lookupOptions),a=e.getModal().find(".lookup-modal-table"),t=a.DataTable({paging:!0,serverSide:!0,processing:!0,lengthChange:!1,pageLength:l.pageSize,deferLoading:l.loadOnStartup?null:0,listAction:{ajaxFunction:l.serviceMethod,inputFilter:function(){return $.extend({filter:o.val()},e.getArgs().extraFilters)}},columnDefs:[{targets:0,data:null,orderable:!1,defaultContent:"",className:"text-center",rowAction:{element:$("<button/>").addClass("btn btn-outline-primary btn-sm btn-icon").attr("title",app.localize("Select")).append($("<i/>").addClass("la la-chevron-circle-right")).click(function(){var t,a;t=$(this).data(),(a=l.canSelect(t))&&(!0===a?(e.setResult(t),e.close()):a.then(function(a){a&&(e.setResult(t),e.close())}))})}},{targets:1,data:"name"}]}),e.getModal().find(".lookup-filter-button").click(function(e){e.preventDefault(),n()}),e.getModal().find(".modal-body").keydown(function(e){13===e.which&&(e.preventDefault(),n())}),(o=e.getModal().find(".lookup-filter-text")).val(l.filterText)}},app.modals.LookupModal.create=function(e){return new app.ModalManager({viewUrl:abp.appPath+"App/Common/LookupModal",scriptUrl:abp.appPath+"view-resources/Areas/App/Views/Common/Modals/_LookupModal.js",modalClass:"LookupModal",lookupOptions:e})};
app.modals.EntityTypeHistoryModal=function(){var t,e,a,n=abp.services.app.auditLog,i={serviceMethod:null,title:app.localize("SelectAnItem"),loadOnStartup:!0,showFilter:!0,filterText:"",pageSize:app.consts.grid.defaultPageSize,canSelect:function(t){return!0}};this.init=function(l){t=l,i=$.extend(i,t.getOptions().lookupOptions),e=t.getModal().find(".entity-type-history-table"),a=t.getArgs(),e.DataTable({paging:!0,serverSide:!0,processing:!0,lengthChange:!1,pageLength:i.pageSize,deferLoading:i.loadOnStartup?null:0,listAction:{ajaxFunction:n.getEntityTypeChanges,inputFilter:function(){return{entityTypeFullName:a.entityTypeFullName,entityId:a.entityId}}},columnDefs:[{targets:0,data:null,orderable:!1,defaultContent:"",rowAction:{element:$("<div/>").addClass("text-center").append($("<button/>").addClass("btn btn-outline-primary btn-sm btn-icon").attr("title",app.localize("EntityChangeDetail")).append($("<i/>").addClass("la la-search"))).click(function(){var t;t=$(this).data(),new app.ModalManager({viewUrl:abp.appPath+"App/AuditLogs/EntityChangeDetailModal",modalClass:"EntityChangeDetailModal"}).open({entityChangeListDto:t})})}},{targets:1,data:"changeTypeName",orderable:!1,render:function(t){return app.localize(t)}},{targets:2,data:"userName"},{targets:3,data:"changeTime",render:function(t){return moment(t).format("L LT")}}]}).ajax.reload()}},app.modals.EntityTypeHistoryModal.create=function(){return new app.ModalManager({viewUrl:abp.appPath+"App/Common/EntityTypeHistoryModal",scriptUrl:abp.appPath+"view-resources/Areas/App/Views/Common/Modals/_EntityTypeHistoryModal.js",modalClass:"EntityTypeHistoryModal"})};