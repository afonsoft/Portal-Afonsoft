$(function(){var n=abp.services.app.hostDashboard,t=$(".SubscriptionExpiringTenantsContainer"),a=t.find(".expiring-tenants-table"),i=t.find(".see-all-expiring-tenants"),e=t.find(".expiring-tenants .caption-helper"),s=[],o=null,r=function(){abp.ui.setBusy(t),n.getSubscriptionExpiringTenantsData().done(function(n){var t,a,r,p,c;t=n.expiringTenants,a=n.subscriptionEndAlertDayCount,r=n.maxExpiringTenantsShownCount,p=n.subscriptionEndDateStart,c=n.subscriptionEndDateEnd,e.text(app.localize("ExpiringTenantsHelpText",a,r)),s=t,o.ajax.reload(),i.data("subscriptionEndDateStart",p).data("subscriptionEndDateEnd",c).click(function(){window.open(abp.appPath+"App/Tenants?subscriptionEndDateStart="+encodeURIComponent($(this).data("subscriptionEndDateStart"))+"&subscriptionEndDateEnd="+encodeURIComponent($(this).data("subscriptionEndDateEnd")))})}).always(function(){abp.ui.clearBusy(t)})};o=a.DataTable({paging:!1,serverSide:!1,processing:!1,info:!1,listAction:{ajaxFunction:function(){return $.Deferred(function(n){n.resolve({items:s,totalCount:s.length})})}},columnDefs:[{targets:0,data:"tenantName"},{targets:1,data:"remainingDayCount"}]}),r()});