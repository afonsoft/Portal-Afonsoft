!function(e){e(function(){e.validator.addMethod("emailRegex",function(e,a,t){var s=new RegExp(t);return this.optional(a)||s.test(e)},"Please enter a valid email address.");var a=abp.services.app.install,t=e("input[name=smtpDomain],input[name=smtpUserName],input[name=smtpPassword]").closest(".form-group");function s(){e("#Settings_SmtpUseDefaultCredentials").is(":checked")?(t.slideUp("fast"),t.enabled=!1):(t.slideDown("fast"),t.enabled=!0)}s(),e("#Settings_SmtpUseDefaultCredentials").change(function(){s()}),e("#SaveButton").click(function(){var t=e("#installForm").serializeFormToObject();e("#installForm").valid()&&(abp.ui.setBusy(),a.setup({connectionString:t.connectionString,adminPassword:t.adminPassword,webSiteUrl:t.webSiteUrl,defaultLanguage:t.defaultLanguage,smtpSettings:{defaultFromAddress:t.defaultFromAddress,defaultFromDisplayName:t.defaultFromDisplayName,smtpHost:t.smtpHost,smtpPort:t.smtpPort?t.smtpPort:0,SmtpEnableSsl:t.SmtpEnableSsl,SmtpUseDefaultCredentials:t.SmtpUseDefaultCredentials,SmtpDomain:t.SmtpDomain,SmtpUserName:t.SmtpUserName,SmtpPassword:t.SmtpPassword},billInfo:{legalName:t.legalName,address:t.billAddress}}).done(function(){window.location.href=abp.appPath+"Install/Restart"}).always(function(){abp.ui.clearBusy()}))}),e("#installForm").validate({debug:!0,rules:{adminPasswordRepeat:{equalTo:"#adminPassword"},defaultFromAddress:{required:!1,email:!1,emailRegex:"^w+([-+.']w+)*@w+([-.]w+)*.w+([-.]w+)*$"}},submitHandler:function(){}})})}(jQuery);